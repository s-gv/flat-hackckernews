flat-hackernews
===============

Hides threaded conversations in Hacker News (as of June 2015) and gives a flat view. The motivation behind this is discussed in [this post](http://sagargv.blogspot.in/2014/06/flat-hacker-news.html).

How-to-use
----------

- Drag this link [Flat/Threaded HN](javascript%3A%7Bif(location.hostname%20%3D%3D%20%22news.ycombinator.com%22)%20%7B%20%20%20%20%20var%20spacerImages%20%3D%20document.getElementsByTagName(%22img%22)%3B%20%2F%2F%20get%20all%20images%20because%20HN%20uses%20a%20small%20image%20for%20indenting%20%20%20%20%20var%20comments%20%3D%20Array.prototype.slice.call(spacerImages).filter(function%20(e)%20%7B%20%20%20%20%20%20%20%20%20%2F%2F%20filter%20only%20spacer%20images%20to%20get%20near%20comments.%20%20%20%20%20%20%20%20%20%2F%2F%20spacer%20images%20have%20widths%20as%20multiples%20of%2040%20%20%20%20%20%20%20%20%20%2F%2F%20Chrome%20returns%20height%20as%202%20and%20Firefox%20as%201.%20So%20accept%20both.%20%20%20%20%20%20%20%20%20return%20((e.src%20%3D%3D%20%22https%3A%2F%2Fnews.ycombinator.com%2Fs.gif%22)%20%26%26%20(e.width%20%25%2040%20%3D%3D%200)%20%26%26%20(e.height%20%3D%3D%201%7C%7Ce.height%20%3D%3D%202))%3B%20%20%20%20%20%20%7D)%3B%20%20%20%20%20var%20searchChildrenByClassName%20%3D%20function(node%2C%20name)%20%7B%20%20%20%20%20%20%20%20%20if(node.className%20%3D%3D%20name)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20return%20node%3B%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20for(var%20i%3D0%3Bi%20%3C%20node.children.length%3B%20i%2B%2B)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20%3D%20searchChildrenByClassName(node.children%5Bi%5D%2C%20name)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20if(result%20!%3D%20null)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20result%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20return%20null%3B%20%20%20%20%20%7D%3B%20%20%20%20%20comments%20%3D%20comments.map(function(e)%20%7B%20%20%20%20%20%20%20%20%20var%20commentRow%20%3D%20e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement%3B%20%20%20%20%20%20%20%20%20var%20replyDiv%20%3D%20searchChildrenByClassName(commentRow%2C%20%22reply%22)%3B%20%20%20%20%20%20%20%20%20var%20replyParent%20%3D%20null%3B%20%20%20%20%20%20%20%20%20if(replyDiv%20!%3D%20null)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20if(replyDiv.lastChild%20!%3D%20null)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20replyParent%20%3D%20replyDiv.lastChild.children%5B0%5D%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20return%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20'depth'%3A%20e.width%2F40%2C%20%2F%2F%20Integer%20indicating%20depth%20of%20comment.%20depth%20%3D%200%20is%20the%20main%20commet%2C%201%20are%20replies%20to%20it%20etc.%20%20%20%20%20%20%20%20%20%20%20%20%20'rowele'%3A%20commentRow%2C%20%2F%2F%20HTML%20%3Ctr%20class%3D%22athing%22%3E%20for%20the%20comment.%20%20%20%20%20%20%20%20%20%20%20%20%20'replyparent'%3A%20replyParent%2C%20%2F%2F%20HTML%20%3Cfont%3E%20that%20contains%20the%20%22reply%22%20button.%20%20%20%20%20%20%20%20%20%7D%3B%20%20%20%20%20%7D)%3B%20%20%20%20%20if(typeof(__flathn__)%20%3D%3D%20%22undefined%22)%20%7B%20%20%20%20%20%20%20%20%20__flathn__%20%3D%20true%3B%20%20%20%20%20%20%20%20%20for(var%20i%3D0%3Bi%20%3C%20comments.length%3B%20i%2B%2B)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bi%5D.depth%20%3E%201)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Don't%20display%20comments%20with%20depth%20%3E%201%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Bi%5D.rowele.style.display%20%3D%20%22none%22%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bi%5D.depth%20%3E%3D%201)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20a%20%22Show%20More%22%20HTML%20element%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20uTag%20%3D%20document.createElement('u')%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uTag.setAttribute('class'%2C%20%22showmore%22)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20aTag%20%3D%20document.createElement('a')%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aTag.setAttribute('href'%2C%22%23%22%2BMath.round(1e9*Math.random()))%3B%20%20%2F%2F%20add%20random%20number%20to%20prevent%20link%20greying%20out%20as%20visited.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aTag.innerHTML%20%3D%20%22more%22%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aTag.addEventListener(%22click%22%2C%20(function(n%2C%20moreElement)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20function(event)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(moreElement.firstChild.innerHTML%20%3D%3D%20%22more%22)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20User%20really%20wants%20to%20see%20deeper%20comments.%20Show%20the%20deeper%20comments%20at%20smaller%20font.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(var%20j%3Dn%2B1%3B%20j%20%3C%20comments.length%3B%20j%2B%2B)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bj%5D.depth%20%3C%20(comments%5Bn%5D.depth%20%2B%201))%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bj%5D.depth%20%3D%3D%20(comments%5Bn%5D.depth%20%2B%201))%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Bj%5D.rowele.style.display%20%3D%20%22%22%3B%20%2F%2F%20show%20the%20row%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moreElement.firstChild.innerHTML%20%3D%20%22less%22%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20User%20clicked%20on%20%22less%22%20and%20doesn't%20want%20deeper%20comments%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for(var%20j%3Dn%2B1%3B%20j%20%3C%20comments.length%3B%20j%2B%2B)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bj%5D.depth%20%3C%20(comments%5Bn%5D.depth%20%2B%201))%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bj%5D.depth%20%3E%3D%20(comments%5Bn%5D.depth%20%2B%201))%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Bj%5D.rowele.style.display%20%3D%20%22none%22%3B%20%2F%2F%20hide%20the%20row%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moreElement.firstChild.innerHTML%20%3D%20%22more%22%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20event.preventDefault()%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)(i%2C%20uTag)%2C%20true)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20uTag.appendChild(aTag)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Display%20%22Show%20More%22%20only%20if%20there%20is%20something%20more%20to%20see.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(i%20%3C%20(comments.length%20-%201))%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bi%2B1%5D.depth%20%3E%20comments%5Bi%5D.depth)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(comments%5Bi%5D.replyparent%20!%3D%20null)%20%7B%20%2F%2F%20replyparent%20will%20be%20null%20for%20%5Bdeleted%5D%20comments%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Bi%5D.replyparent.appendChild(uTag)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%7D%20else%20%7B%20%20%20%20%20%20%20%20%20delete%20__flathn__%3B%20%20%20%20%20%20%20%20%20var%20showmores%20%3D%20document.getElementsByClassName(%22showmore%22)%3B%20%20%20%20%20%20%20%20%20while(showmores.length%20%3E%200)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20showmores%5B0%5D.parentElement.removeChild(showmores%5B0%5D)%3B%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20for(var%20i%3D0%3Bi%20%3C%20comments.length%3B%20i%2B%2B)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20comments%5Bi%5D.rowele.style.display%20%3D%20%22%22%3B%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%7D%20%7D%20else%20%7B%20%20%20%20%20alert(%22This%20works%20with%20only%20Hacker%20News.%20Open%20a%20discussion%20at%20news.ycombinator.com%20and%20try%20again.%22)%3B%20%7D%7Dvoid(0)%3B) to your bookmarks.
- Open a discussion at [Hacker News](http://news.ycombinator.com/) and click on the ``Flat/Threaded HN`` bookmark. Comments at depth > 1 are hidden.
